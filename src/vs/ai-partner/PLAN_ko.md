<details>

<summary><strong>(클릭하여 확장)</strong></summary>

### **최종 프롬프트: VSCode에서 진보하고 자가 발전하는 AI 코딩 파트너 설계**

#### **컨텍스트 문서 공지**

이 계획은 모델-컨트롤러-프로토콜(MCP) 서버 아키텍처 구현을 필요로 합니다. 클라이언트-서버 모델, 도구 노출 및 연결 흐름을 설명하는 MCP 문서를 제공받지 못한 경우, **진행하기 전에 반드시 요청해야 합니다.**

#### **목표**

당신의 주요 임무는 `Microsoft/vscode` 리포지토리의 포크된 버전에 깊숙이 통합되는 정교한 다중 에이전트 AI 시스템을 설계하고 구현하는 것입니다. 이 시스템은 개발자를 사전에 지원하고, 코드 품질을 개선하며, 상호 작용을 통해 학습하고, 전체 개발 수명 주기를 간소화하는 고급 컨텍스트 인식 코딩 파트너로 기능할 것입니다.

#### **핵심 원칙 및 제약 조건**

1.  **기술 스택 및 환경:** 이 프로젝트는 **TypeScript**를 사용하여 **VSCode 확장 프로그램**으로 개발되어야 합니다. VSCode 확장 API에 익숙해야 합니다.
2.  **다국어 지원 및 언어 분리:** AI의 **대화 응답**은 VSCode UI 언어(`vscode.env.language`에서 검색)와 동적으로 일치해야 합니다. 그러나 코드, 인코드 주석 및 기술 문서를 포함한 모든 생성된 **코드 산출물**은 **항상 영어로 작성되어야 합니다**.
3.  **안정성 및 견고성:** 모든 생성된 코드는 프로덕션 품질이어야 하며, 견고하고 오류가 없어야 합니다. VSCode 호스트 환경에 대한 부작용을 고려해야 합니다.
4.  **점진적 및 단계적 개발:** 솔루션을 논리적이고 점진적인 단계로 제공해야 합니다. 전체 코드베이스를 한 번에 제공하지 마십시오.
5.  **엄격한 자가 수정:** 코드 생성 후 정확성, 효율성 및 모든 원칙 준수 여부를 자체 검토해야 합니다.
6.  **아키텍처 순수성:** 시스템은 지정된 **MAS, MCP, 및 A2A** 패턴을 엄격하게 따라야 합니다. LangChain과 같은 고수준의 불투명한 AI 프레임워크를 피하십시오.
7.  **지식 요청 및 명확화:** 특정 아키텍처 패턴(예: MCP), VSCode 확장 API 또는 기능 구현을 위한 모범 사례에 대해 확신이 서지 않는 경우, **절대 가정에 기반하여 진행해서는 안 됩니다.** 대신 사용자에게 명확한 설명이나 예시를 요청해야 합니다.
8.  **업스트림 동기화 복원력:** 전체 시스템은 `Sync Fork` 후 기능을 보장하기 위해 고도로 모듈화되고 격리된 확장으로 구현되어야 합니다.
9.  **모델 유연성 및 복원력:** 시스템은 **OpenAI 호환 API 인터페이스**를 사용해야 합니다. 사용자는 여러 API 키를 제공할 수 있어야 합니다. `QuotaLimit` 오류가 발생하면 시스템은 자동으로 다음 사용 가능한 키로 전환해야 합니다.

#### **시스템 아키텍처 개요**

이 시스템은 **모델-컨트롤러-프로토콜(MCP)**에 기반한 클라이언트-서버 모델에서 작동하는 **다중 에이전트 시스템(MAS)**입니다.

1.  **VSCode 확장 (MCP 클라이언트):** 이것이 주요 사용자 대면 구성 요소입니다.
2.  **로컬 도구 서버 (MCP 서버):** 외부 환경과 상호 작용을 담당하는 별도의 로컬 서버 애플리케이션입니다.
3.  **LLM 제어 및 최적화 서비스:** 모든 에이전트가 LLM과 통신하는 데 사용하는 VSCode 확장 내의 중요한 서비스입니다.
4.  **지능형 자동 수정:** 시스템은 단순히 문제를 제안하는 것을 넘어, VSCode의 진단 시스템(Linter, 컴파일러 등)과 연동하여 파일 내의 오류와 경고를 능동적으로 식별합니다. `RefactoringAgent`를 통해 이러한 문제들을 자동으로 수정하는 기능을 제공하여, 개발자가 코드 품질을 손쉽게 개선하고 유지보수 시간을 단축할 수 있도록 돕습니다.

#### **에이전트 및 도구 명단**

**A. 에이전트 (VSCode 확장 내):**

*   `OrchestratorAgent`, `CodeAnalysisAgent`, `ContextManagementAgent`, `RefactoringSuggestionAgent`, `DocumentationGenerationAgent`, `AILedLearningAgent`.

**B. 도구 (로컬 도구 서버에서 노출):**

*   `WebSearchTool`, `TerminalExecutionTool`, `AutomatedTestAndFixTool`, `GitAutomationTool`, `SecurityVulnerabilityTool`, `PerformanceProfilingTool`, `ArchitectureGuardianTool`, `RealtimeDebuggingTool`.

#### **사용자 인터페이스(UI) 구성 요소**

*   **메인 뷰:** 컨텍스트를 표시하고 상호 작용을 관리하기 위한 사이드 패널 뷰입니다.
*   **파일 보호:** AI 수정을 방지하기 위한 파일 수준 토글입니다.
*   **설정 페이지:** **커넥터** 및 **LLM 구성** 섹션을 포함합니다.

#### **단계적 개발 계획 및 초기 과제**

**첫 번째 과제는 상세한 데이터 스키마와 인터페이스를 설계하는 것입니다.** 다음에 대한 TypeScript `interface` 정의를 제공하십시오:

1.  표준 **A2A 메시지 형식**.
2.  `CodeSummary` 및 `CallGraph` 데이터 구조.
3.  클라이언트-서버 통신을 위한 **MCP 메시지 형식**.

</details>