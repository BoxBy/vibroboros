<details>

<summary><strong>(마스터 플랜 / 클릭하여 확장)</strong></summary>

### **최종 프롬프트: VSCode에서 진화하는 고급 AI 코딩 파트너 아키텍처 설계**

#### **컨텍스트 문서 참고**

이 계획은 모델-컨트롤러-프로토콜(MCP) 서버 아키텍처 구현을 필요로 합니다. 클라이언트-서버 모델, 도구 노출, 연결 흐름을 설명하는 MCP 문서를 제공받지 못했다면, **진행하기 전에 반드시 요청해야 합니다.**

#### **목표**

당신의 주요 임무는 `Microsoft/vscode` 리포지토리의 포크된 버전에 깊숙이 통합되는 정교한 다중 에이전트 AI 시스템을 설계하고 구현하는 것입니다.

#### **핵심 원칙 및 제약 조건**

1.  **기술 스택 및 환경:** 이 프로젝트는 **TypeScript**를 사용하여 **VSCode 확장 프로그램**으로 개발되어야 합니다.

2.  **다국어 지원 및 언어 분리:** AI의 **대화 응답**은 VSCode UI 언어와 일치해야 하지만, 모든 **코드 결과물**은 **영어**여야 합니다.

3.  **안정성 및 견고성:** 모든 코드는 상용 수준의 품질을 갖추어야 합니다.

4.  **점진적 및 단계별 개발:** 논리적이고 점진적인 단계로 솔루션을 제공합니다.

5.  **엄격한 자가 수정:** 생성 후 코드를 스스로 검토합니다.

6.  **아키텍처 순수성:** **MAS, MCP, A2A** 패턴을 엄격히 따릅니다. 불투명한 프레임워크 사용을 피합니다.

7.  **지식 요청 및 명확화:** **절대 추측에 기반하여 진행하지 않습니다.** API 또는 패턴에 대해 사용자에게 명확한 설명을 요청합니다.

8.  **업스트림 동기화 복원력:** 매우 모듈화되고 격리된 확장으로 구현합니다.

9.  **모델 유연성 및 복원력:** **OpenAI 호환 API**를 사용하고 키 순환을 지원합니다.


#### **시스템 아키텍처 개요**

이 시스템은 MCP 기반 클라이언트-서버 모델에서 작동하는 **다중 에이전트 시스템(MAS)**입니다. VSCode 확장(클라이언트), 로컬 도구 서버, LLM 제어 서비스를 포함합니다. **A2A(내부)**와 **MCP(외부)** 통신 간의 구별이 중요합니다.

#### **에이전트 및 도구 목록**

**A. 에이전트 (VSCode 확장 내):**

-   `OrchestratorAgent`: MCP 클라이언트로서 모든 워크플로우를 지시합니다.

-   `CodeAnalysisAgent`: 코드를 파싱하고, 요약을 생성하며, 호출 그래프를 구축합니다. **또한 프로젝트의 기술 스택에 기반하여 적절한 항목을 제안함으로써 `.gitignore` 파일을 초기화하고 유지 관리할 책임이 있습니다.**

-   `ContextManagementAgent`: 프롬프트에 대한 관련 컨텍스트를 선택합니다.

-   `RefactoringSuggestionAgent`: 코드 개선 사항을 제안합니다.

-   `DocumentationGenerationAgent`: `README.md` 파일을 생성하고 업데이트합니다.

-   `AILedLearningAgent`: 사용자의 스타일과 패턴을 학습합니다.


**B. 도구 (로컬 도구 서버에서 노출):**

-   `WebSearchTool`: 웹 검색을 실행합니다.

-   `TerminalExecutionTool`: 터미널 명령어(예: 유닛 테스트)를 실행합니다.

-   `AutomatedTestAndFixTool`: 테스트 실행 및 수정 조정을 위한 복합 도구입니다.

-   `GitAutomationTool`: 사용자 확인을 위해 git 명령어를 준비합니다.

-   `SecurityVulnerabilityTool`: 정적 분석(SAST)을 수행합니다.

-   `PerformanceProfilingTool`: 성능 병목 현상을 식별합니다.

-   `ArchitectureGuardianTool`: 아키텍처 규칙을 강제합니다.

-   `RealtimeDebuggingTool`: 디버거와 통합됩니다.


#### **사용자 인터페이스(UI) 구성 요소**

-   **메인 뷰:** 컨텍스트 및 상호 작용을 위한 사이드 패널입니다.

-   **파일 보호:** AI의 파일 수정을 방지하는 토글 기능입니다.

-   **설정 페이지:** **커넥터**(MCP 서버) 및 **LLM 구성**을 위한 페이지입니다.


#### **단계별 개발 계획 및 초기 과제**

**당신의 첫 번째 과제는 상세한 데이터 스키마와 인터페이스를 설계하는 것입니다.** A2A 메시지 형식, 코드 데이터 구조, MCP 메시지 형식에 대한 TypeScript `interface` 정의를 제공해 주세요.

</details>