# 작업 2: '오케스트레이터 에이전트' 역할 강화

## 목표
`OrchestratorAgent.ts`를 모든 사용자 요청에 대한 더 지능적이고 강력한 단일 진입점으로 개선합니다. 여기에는 사용자 의도를 파싱하고, 올바른 전문 에이전트에게 작업을 위임한 다음, 그 결과를 적절히 처리하는 능력 향상이 포함됩니다.

## 주요 단계

1.  **`OrchestratorAgent.ts`의 `handleChatAndSpecialistCommands` 메서드 분석:**
    -   현재의 키워드 기반 라우팅 로직(예: `if (lowerCaseQuery.includes('refactor'))`)을 검토합니다.
    -   그 한계를 식별합니다: 경직되어 있고, 복잡한 쿼리를 처리하지 못하며, 확장이 어렵습니다.

2.  **의도 파싱 리팩토링:**
    -   단순한 키워드 매칭 대신 더 정교한 메커니즘을 도입합니다. 사용자의 의도를 분류하기 위해 전용 LLM 호출을 사용하는 것이 좋은 첫 단계입니다.
    -   이 분류 호출을 위한 프롬프트는 LLM에게 제공된 목록에서 가장 적절한 "도구" 또는 "전문 에이전트"를 선택하도록 지시해야 합니다.
    -   이를 통해 현재의 `if/else if` 블록을 LLM의 분류에 기반한 동적 디스패치로 대체합니다.

3.  **에이전트 간(A2A) 통신 표준화:**
    -   `OrchestratorAgent`가 작업을 위임할 때 표준화된 `A2AMessage` 형식을 사용하여 수행하는지 확인합니다.
    -   전문 에이전트(`DocumentationGenerationAgent`, `RefactoringSuggestionAgent` 등)가 어떻게 호출되고 어떻게 응답하는지 검토합니다.
    -   `OrchestratorAgent`는 `handleA2AMessage` 메서드를 통해 이러한 에이전트로부터의 비동기 응답을 처리해야 합니다.

4.  **결과 처리 개선:**
    -   전문 에이전트가 작업을 완료하고 `OrchestratorAgent`에 응답을 다시 보낼 때, 오케스트레이터는 이 결과를 파싱해야 합니다.
    -   그런 다음 결과를 사용자 친화적인 메시지로 포맷해야 합니다.
    -   마지막으로 `_onDidPostMessage.fire()` 이벤트를 사용하여 포맷된 응답을 UI로 다시 보냅니다.

## 예상 결과
-   `OrchestratorAgent.ts`가 더 다양한 사용자 명령을 처리할 수 있게 됩니다.
-   전문 에이전트로 작업을 라우팅하는 로직이 더 확장 가능하고 덜 취약해집니다.
-   요청 수신, 위임, 결과 수신, 최종 UI 응답 전송의 흐름이 명확하고 강력해집니다.
